<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http//www.thymeleaf.org/extras/spring-security" lang="sr">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<div th:fragment="tabelaPutovanja1(aranzman, listaPutovanja)" align="center">
    <table class="table table-striped table-bordered">
        <thead class="thead-dark">
        <tr>
            <th>ID Putovanja</th>
            <th>Datum/Vreme Polaska</th>
            <th>Datum Povratka</th>
            <th>Popust</th>
            <th>Cena sa popustom (&#8364;)</th>
            <th>Broj Prijavljenih</th>
            <th>Rezervacije</th>
            <th>Status</th>
            <th>Akcije</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="putovanje : ${listaPutovanja}">
            <td th:text="${putovanje.putovanjeId}"></td>
            <td th:text="${#temporals.format(putovanje.datumVremePolaska, 'dd.MM.yyyy. HH:mm')}"></td>
            <td th:text="${#temporals.format(putovanje.datumPovratka, 'dd.MM.yyyy.')}"></td>

            <!--/*Popust th blockovi */-->
            <th:block th:if="${putovanje.popust == null or putovanje.popust == 0}">
                <td>NE</td>
            </th:block>
            <th:block th:if="${putovanje.popust != null and putovanje.popust != 0}">
                <td>[[${putovanje.popust}]] %</td>
            </th:block>
            <!--/*KRAJ Popust th blockovi */-->


            <td th:text="${@putovanjeServiceImpl.cenaPutovanjaAranzmana(aranzman.cena, putovanje.popust)} + ' &#8364;'"></td>
            <td th:text="${putovanje.brojPrijavljenih}"></td>
            <td><!--Rezervacije -->
                <a th:href="@{/admin/putovanje/rezervacijePutovanjaSamoPregled(putovanjeId=${putovanje.putovanjeId})}" class="btn btn-success">Pregled Rezervacija Putovanja (ID: [[${putovanje.putovanjeId}]])</a>
                <!--REZERVACIJE PUTOVANJA SAMO PREGLED, NE I MENDADZMENT KOMPLETAN! -->
            </td>

            <td th:text="${putovanje.status}"></td>

            <td> <!--/* Akcije putovanja (Edit i Delete) */-->
                <a th:href="@{'/admin/putovanje/editIzvestaj/' + ${putovanje.putovanjeId}}" class="btn btn-warning btn-sm mb-1">Izmeni (Dodaj izveštaj)</a>
                <!--EDIT PUTOVANJA SAMO IZVESTAJ! -->
                <a th:href="@{/admin/putovanje/delete(putovanjeId=${putovanje.putovanjeId}, aranzmanId=${aranzman.aranzmanId})}" class="btn btn-danger btn-sm"
                   th:data-putovanjeId="${putovanje.putovanjeId}"
                   onclick="return confirm('Da li ste sigurni da želite da obrišete putovanje kao i sve rezervacije u okviru njega? (Putovanje ID: ' + this.getAttribute('data-putovanjeId') +  ')')">Obriši</a>
            </td>

        </tr>
        </tbody>

    </table>
</div>


</body>
</html>