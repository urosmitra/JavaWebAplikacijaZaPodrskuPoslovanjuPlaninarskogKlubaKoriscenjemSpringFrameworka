<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="sr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

    <title>Planinarski klub "Summit Explorers"</title>

    <!-- Bootstrap 4.5 CSS -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <!-- reference CSS file -->
    <link rel="stylesheet" th:href="@{/css/myStyle.css}">

    <!--Font Awesome ikonice!-->
    <link th:href="@{/fontAwesome/all.css}" rel="stylesheet">
    <!--load all styles -->
</head>
<body>

<!-- Navigation bar fragment -->
<div th:replace="fragments/navBar :: navBar1"></div>
<!-- Navigation bar fragment END-->

<div class="container" style="min-height: 30rem;">
    <div class="row ml-0 mt-2 mb-3">
        <h1>Izveštaji Aranžmana</h1>
    </div>

    <th:block th:if="${listaIzvestajaAranzmana == null or listaIzvestajaAranzmana.isEmpty()}">
        <h2>Nema nijednog izveštaja za aranžmane u bazi podataka.</h2>
    </th:block>

    <th:block th:if="${listaIzvestajaAranzmana != null and !listaIzvestajaAranzmana.isEmpty()}">
        <table th:id="tabelaIzvestajaAranzmana" class="table table-striped table-bordered">
            <thead class="thead-dark">
                <th>
                    <a th:href="@{'/manager/aranzmani/page/' + ${currentPage} + '?sortField=aranzmanId&sortDir=' + ${reverseSortDir}}">
                        ID
                    </a>
                </th>
                <th>
                    <a th:href="@{'/manager/aranzmani/page/' + ${currentPage} + '?sortField=nazivAranzmana&sortDir=' + ${reverseSortDir}}">
                        Naziv
                    </a>
                </th>
                <th>
                    Thumbnail
                </th>
                <th>
                    <a th:href="@{'/manager/aranzmani/page/' + ${currentPage} + '?sortField=cena&sortDir=' + ${reverseSortDir}}">
                        Cena
                    </a>
                </th>
                <th>
                    <a th:href="@{'/manager/aranzmani/page/' + ${currentPage} + '?sortField=brojPutnikaZaAranzman&sortDir=' + ${reverseSortDir}}">
                        Ukupan Broj Putnika na putovanjima
                    </a>
                </th>
                <th>
                    <a th:href="@{'/manager/aranzmani/page/' + ${currentPage} + '?sortField=prosekPopunjenostiAranzmana&sortDir=' + ${reverseSortDir}}">
                        Prosek popunjenosti aranzmana (%)
                    </a>
                </th>
                <th>
                    <a th:href="@{'/manager/aranzmani/page/' + ${currentPage} + '?sortField=ukupnaZaradaAranzmana&sortDir=' + ${reverseSortDir}}">
                        Ukupna Zarada Aranzmana
                    </a>
                </th>
                <th>
                    <a th:href="@{'/manager/aranzmani/page/' + ${currentPage} + '?sortField=vrstaPutovanjaAranzmana&sortDir=' + ${reverseSortDir}}">
                        Vrsta Aranzmana
                    </a>
                </th>
                <th>
                    <a th:href="@{'/manager/aranzmani/page/' + ${currentPage} + '?sortField=prosecnaZaradaPoPutnikuAranzmana&sortDir=' + ${reverseSortDir}}">
                        Prosečna Zarada po Putniku
                    </a>
                </th>
            </thead>

            <tbody th:id="bodyTableIzvestajAranzmani">
                <tr th:each="aranzmanIzvestaj : ${listaIzvestajaAranzmana}">
                    <td th:text="${aranzmanIzvestaj.aranzmanId}"></td>
                    <td th:text="${aranzmanIzvestaj.nazivAranzmana}"></td>
                    <th:block th:if="${aranzmanIzvestaj.thumbnailPhoto != null}">
                        <td class="p-0" style="border: 3px solid #80d5aa;"><img th:src="@{'/slikeAranzmani/aranzmanId-' + ${aranzmanIzvestaj.aranzmanId} + '/' + ${aranzmanIzvestaj.thumbnailPhoto}}" style="object-fit: cover; height: 150px;"  class="img-fluid"></td>
                    </th:block>
                    <th:block th:if="${aranzmanIzvestaj.thumbnailPhoto == null}">
                        <td>Nema thumbnail sliku</td>
                    </th:block>
                    <td th:text="${aranzmanIzvestaj.cena + '&#8364;'}"></td>
                    <th:block th:if="${aranzmanIzvestaj.brojPutnikaZaAranzman != null}">
                        <td th:text="${aranzmanIzvestaj.brojPutnikaZaAranzman}"></td>
                    </th:block>
                    <th:block th:unless="${aranzmanIzvestaj.brojPutnikaZaAranzman != null}">
                        <td class="font-weight-bolder" style="color: red;">0</td>
                    </th:block>


                    <th:block th:if="${aranzmanIzvestaj.prosekPopunjenostiAranzmana != null}">
                        <td th:text="${aranzmanIzvestaj.prosekPopunjenostiAranzmana + '%'}"></td>
                    </th:block>
                    <th:block th:if="${aranzmanIzvestaj.prosekPopunjenostiAranzmana == null}">
                        <td class="font-weight-bolder" style="color: red;">0%</td>
                    </th:block>

                    <th:block th:if="${aranzmanIzvestaj.ukupnaZaradaAranzmana != null}">
                        <td>[[${aranzmanIzvestaj.ukupnaZaradaAranzmana}]]&#8364;</td>
                    </th:block>
                    <th:block th:unless="${aranzmanIzvestaj.ukupnaZaradaAranzmana != null}">
                        <td style="color: red;" class="font-weight-bolder">0&#8364;</td>
                    </th:block>

                    <th:block th:if="${aranzmanIzvestaj.vrstaPutovanjaAranzmana != null}">
                        <td th:text="${aranzmanIzvestaj.vrstaPutovanjaAranzmana.naziv}"></td>
                    </th:block>
                    <th:block th:if="${aranzmanIzvestaj.vrstaPutovanjaAranzmana == null}">
                        <td>Vrsta Putovanja za ovaj aranžman nije podešena.</td>
                    </th:block>

                    <th:block th:if="${aranzmanIzvestaj.prosecnaZaradaPoPutnikuAranzmana != null}">
                        <td th:text="${#numbers.formatDecimal(aranzmanIzvestaj.prosecnaZaradaPoPutnikuAranzmana, 0, 2, 'POINT')} + '&#8364;'"></td>
                    </th:block>
                    <th:block th:unless="${aranzmanIzvestaj.prosecnaZaradaPoPutnikuAranzmana != null}">
                        <td class="font-weight-bolder" style="color: red;">0&#8364;</td>
                    </th:block>

                </tr>
            </tbody>
        </table>

        <!--/* PAGINACIJA */-->
        <th:block th:if="${totalPages > 1}">
            <div class="row col-md-10">
                <div class="col-md-3">
                    Ukupan broj aranžmana:  <span class="font-weight-bolder">[[${totalItems}]]</span>
                </div>
                <div class="col-md-4">
                    <th:block th:each="i : ${#numbers.sequence(1, totalPages)}">
                        <a th:if="${currentPage != i}" th:href="@{'/manager/aranzmani/page/' + ${i} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">[[${i}]]</a>
                        <span th:unless="${currentPage != i}">[[${i}]]</span> &nbsp; &nbsp;
                    </th:block>
                </div>
                <div class="col-md-1">
                    <a th:if="${currentPage < totalPages}" th:href="@{'/manager/aranzmani/page/' + ${currentPage + 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Next</a>
                    <span th:unless="${currentPage < totalPages}">Next</span>
                </div>
                <div class="col-md-1">
                    <a th:if="${currentPage < totalPages}" th:href="@{'/manager/aranzmani/page/' + ${totalPages} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Last</a>
                    <span th:unless="${currentPage < totalPages}">Last</span>
                </div>
            </div>
        </th:block>
        <!--/* KRAJ paginacije */-->

    </th:block>


</div>

<!--/* Footer fragment */-->
<div class="container">
    <div th:replace="fragments/footer :: footer1"></div>
</div>
<!--/* Footer fragment END */-->


<!-- Script Source Files -->

<!-- jQuery -->
<script th:src="@{/js/jquery-3.5.1.min.js}"></script>
<!-- Popper JS -->
<script th:src="@{/js/popper.min.js}"></script>
<!-- Bootstrap 4.5 JS -->
<script th:src="@{/js/bootstrap.min.js}"></script>
<!-- Font Awesome -->
<script th:src="@{/js/all.js}"></script>
</body>
</html>