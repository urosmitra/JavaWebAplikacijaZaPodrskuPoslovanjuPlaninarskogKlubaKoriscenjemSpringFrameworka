<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="sr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

    <title>Planinarski klub "Summit Explorers"</title>

    <!-- Bootstrap 4.5 CSS -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <!-- reference CSS file -->
    <link rel="stylesheet" th:href="@{/css/myStyle.css}">

    <!--Font Awesome ikonice!-->
    <link th:href="@{/fontAwesome/all.css}" rel="stylesheet">
    <!--load all styles -->
</head>
<body>

<!-- Navigation bar fragment -->
<div th:replace="fragments/navBar :: navBar1"></div>
<!-- Navigation bar fragment END-->

<div class="container" style="min-height: 30rem;">
    <div class="row ml-0 mt-2 mb-3">
        <h1>Izveštaji Budućih Putovanja</h1>
    </div>
    <th:block th:if="${listaIzvestajaBuducihPutovanja == null or listaIzvestajaBuducihPutovanja.isEmpty()}">
        <h2>Trenutno nema nijednog budućeg putovanja u najavi!</h2>
    </th:block>

    <th:block th:if="${listaIzvestajaBuducihPutovanja != null and !listaIzvestajaBuducihPutovanja.isEmpty()}">
        <table id="tabelaBuducihPutovanjaIzvestaja" class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>
                        <a th:href="@{'/manager/izvestajBuducaPutovanja/page/' + ${currentPage} + '?sortField=putovanjeId&sortDir=' + ${reverseSortDir}}">
                            ID
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/izvestajBuducaPutovanja/page/' + ${currentPage} + '?sortField=nazivPutovanja&sortDir=' + ${reverseSortDir}}">
                            Naziv
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/izvestajBuducaPutovanja/page/' + ${currentPage} + '?sortField=datumVremePolaska&sortDir=' + ${reverseSortDir}}">
                            Datum Vreme Polaska
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/izvestajBuducaPutovanja/page/' + ${currentPage} + '?sortField=datumPovratka&sortDir=' + ${reverseSortDir}}">
                            Datum Povratka
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/izvestajBuducaPutovanja/page/' + ${currentPage} + '?sortField=cena&sortDir=' + ${reverseSortDir}}">
                            Cena
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/izvestajBuducaPutovanja/page/' + ${currentPage} + '?sortField=cenaSaPopustom&sortDir=' + ${reverseSortDir}}">
                            Cena sa Popustom
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/izvestajBuducaPutovanja/page/' + ${currentPage} + '?sortField=brojRezervacija&sortDir=' + ${reverseSortDir}}">
                            Broj Rezervacija
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/izvestajBuducaPutovanja/page/' + ${currentPage} + '?sortField=projekcijaZarade&sortDir=' + ${reverseSortDir}}">
                            Projekcija Zarade
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/izvestajBuducaPutovanja/page/' + ${currentPage} + '?sortField=popunjenostPutovanja&sortDir=' + ${reverseSortDir}}">
                            Popunjenost Putovanja (%)
                        </a>
                    </th>
                </tr>

            </thead>
            <tbody id="bodyTableBuducaPutovanjaIzvestaji">
                <tr th:each="buducePutovanje : ${listaIzvestajaBuducihPutovanja}">
                    <td th:text="${buducePutovanje.putovanjeId}"></td>
                    <td th:text="${buducePutovanje.nazivPutovanja}"></td>
                    <td th:text="${#temporals.format(buducePutovanje.datumVremePolaska, 'dd.MM.yyyy. HH:mm')}"></td>
                    <td th:text="${#temporals.format(buducePutovanje.datumPovratka, 'dd.MM.yyyy.')}"></td>
                    <td th:text="${buducePutovanje.cena + '&#8364;'}"></td>
                    <td>[[${buducePutovanje.cenaSaPopustom}]]&#8364; (-<span class="font-weight-bolder" th:text="${buducePutovanje.popust} + '%'"></span>)</td>
                    <th:block th:if="${buducePutovanje.brojRezervacija != 0}">
                        <td th:text="${buducePutovanje.brojRezervacija}"></td>
                    </th:block>
                    <th:block th:if="${buducePutovanje.brojRezervacija == 0}">
                        <td style="color: red;" class="font-weight-bolder">0</td>
                    </th:block>
                    <th:block th:if="${buducePutovanje.projekcijaZarade != null}">
                        <td th:text="${buducePutovanje.projekcijaZarade} + '&#8364;'"></td>
                    </th:block>
                    <th:block th:if="${buducePutovanje.projekcijaZarade == null}">
                        <td style="color: red;" class="font-weight-bolder">0&#8364;</td>
                    </th:block>
                    <td>[[${buducePutovanje.popunjenostPutovanja}]]%</td>

                </tr>

            </tbody>
        </table>

        <!--/* PAGINACIJA */-->
        <th:block th:if="${totalPages > 1}">
            <div class="row col-md-10">
                <div class="col-md-3">
                    Ukupan broj putovanja:  <span class="font-weight-bolder">[[${totalItems}]]</span>
                </div>
                <div class="col-md-1">
                    <th:block th:each="i : ${#numbers.sequence(1, totalPages)}">
                        <a th:if="${currentPage != i}" th:href="@{'/manager/izvestajBuducaPutovanja/page/' + ${i} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">[[${i}]]</a>
                        <span th:unless="${currentPage != i}">[[${i}]]</span> &nbsp; &nbsp;
                    </th:block>
                </div>
                <div class="col-md-1">
                    <a th:if="${currentPage < totalPages}" th:href="@{'/manager/izvestajBuducaPutovanja/page/' + ${currentPage + 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Next</a>
                    <span th:unless="${currentPage < totalPages}">Next</span>
                </div>
                <div class="col-md-1">
                    <a th:if="${currentPage < totalPages}" th:href="@{'/manager/izvestajBuducaPutovanja/page/' + ${totalPages} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Last</a>
                    <span th:unless="${currentPage < totalPages}">Last</span>
                </div>
            </div>
        </th:block>
        <!--/* KRAJ PAGINACIJA */-->

    </th:block>

</div>

<!--/* Footer fragment */-->
<div class="container">
    <div th:replace="fragments/footer :: footer1"></div>
</div>
<!--/* Footer fragment END */-->


<!-- Script Source Files -->

<!-- jQuery -->
<script th:src="@{/js/jquery-3.5.1.min.js}"></script>
<!-- Popper JS -->
<script th:src="@{/js/popper.min.js}"></script>
<!-- Bootstrap 4.5 JS -->
<script th:src="@{/js/bootstrap.min.js}"></script>
<!-- Font Awesome -->
<script th:src="@{/js/all.js}"></script>
</body>
</html>