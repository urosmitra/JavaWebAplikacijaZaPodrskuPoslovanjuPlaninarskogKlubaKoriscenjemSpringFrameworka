<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="sr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

    <title>Planinarski klub "Summit Explorers"</title>

    <!-- Bootstrap 4.5 CSS -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <!-- reference CSS file -->
    <link rel="stylesheet" th:href="@{/css/myStyle.css}">

    <!--Font Awesome ikonice!-->
    <link th:href="@{/fontAwesome/all.css}" rel="stylesheet">
    <!--load all styles -->
</head>
<body>
<!-- Navigation bar fragment -->
<div th:replace="fragments/navBar :: navBar1"></div>
<!-- Navigation bar fragment END-->

<div class="container" style="min-height: 30rem;">
    <div class="row ml-0 mt-2 mb-3">
        <h1>Izveštaji o Proizvodima</h1>
    </div>
    <th:block th:if="${listaIzvestajaProizvoda == null or listaIzvestajaProizvoda.isEmpty()}">
        <h2>Nema nijednog proizvoda u bazi!</h2>
    </th:block>

    <th:block th:if="${listaIzvestajaProizvoda != null and !listaIzvestajaProizvoda.isEmpty()}">


        <table id="tabelaIzvestajaProizvoda" class="table table-striped table-bordered">
            <thead class="thead-dark">
                <tr>
                    <th>
                        <a th:href="@{'/manager/listaProizvoda/page/' + ${currentPage} + '?sortField=proizvodId&sortDir=' + ${reverseSortDir}}">
                            ID
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/listaProizvoda/page/' + ${currentPage} + '?sortField=naziv&sortDir=' + ${reverseSortDir}}">
                            Naziv
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/listaProizvoda/page/' + ${currentPage} + '?sortField=cena&sortDir=' + ${reverseSortDir}}">
                            Cena
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/listaProizvoda/page/' + ${currentPage} + '?sortField=cenaSaPopustom&sortDir=' + ${reverseSortDir}}">
                            Cena sa Popustom
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/listaProizvoda/page/' + ${currentPage} + '?sortField=vrstaProizvoda&sortDir=' + ${reverseSortDir}}">
                            Vrsta Proizvoda
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/listaProizvoda/page/' + ${currentPage} + '?sortField=brojProdatihJedinica&sortDir=' + ${reverseSortDir}}">
                            Broj Prodatih Jedinica
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/listaProizvoda/page/' + ${currentPage} + '?sortField=dostupnaKolicina&sortDir=' + ${reverseSortDir}}">
                            Količina u Magacinu
                        </a>
                    </th>
                    <th>
                        <a th:href="@{'/manager/listaProizvoda/page/' + ${currentPage} + '?sortField=ukupnaZaradaEvri&sortDir=' + ${reverseSortDir}}">
                            Ukupna Zarada
                        </a>
                    </th>
                </tr>
            </thead>
            <tbody id="bodyTableProizvIzvestaj">
                <tr th:each="proizvodIzv : ${listaIzvestajaProizvoda}">
                    <td th:text="${proizvodIzv.proizvodId}"></td>
                    <td th:text="${proizvodIzv.naziv}"></td>
                    <td th:text="${proizvodIzv.cena + '&#8364;'}"></td>
                    <td>[[${proizvodIzv.cenaSaPopustom}]]&#8364; (-<span class="font-weight-bolder" th:text="${proizvodIzv.popust} + '%'"></span>)</td>
                    <td th:text="${proizvodIzv.vrstaProizvoda.naziv}"></td>
                    <th:block th:if="${proizvodIzv.brojProdatihJedinica != null}">
                        <td th:text="${proizvodIzv.brojProdatihJedinica}"></td>
                    </th:block>
                    <th:block th:if="${proizvodIzv.brojProdatihJedinica == null}">
                        <td style="color: red;" class="font-weight-bolder">0</td>
                    </th:block>

                    <th:block th:if="${proizvodIzv.dostupnaKolicina != 0}">
                        <td th:text="${proizvodIzv.dostupnaKolicina}"></td>
                    </th:block>
                    <th:block th:if="${proizvodIzv.dostupnaKolicina == 0}">
                        <td th:text="${proizvodIzv.dostupnaKolicina}" class="font-weight-bolder" style="color: red;"></td>
                    </th:block>



                    <th:block th:if="${proizvodIzv.ukupnaZaradaEvri != null}">
                        <td th:text="${proizvodIzv.ukupnaZaradaEvri} + '&#8364;'" class="font-weight-bolder"></td>
                    </th:block>
                    <th:block th:if="${proizvodIzv.ukupnaZaradaEvri == null}">
                        <td class="font-weight-bolder" style="color: red;">0&#8364;</td>
                    </th:block>

                </tr>
            </tbody>
        </table>

        <!--/* paginacija  */-->
        <th:block th:if="${totalPages > 1}">
            <div class="row col-md-10">
                <div class="col-md-3">
                    Ukupan broj proizvoda:  <span class="font-weight-bolder">[[${totalItems}]]</span>
                </div>
                <div class="col-md-1">
                    <th:block th:each="i : ${#numbers.sequence(1, totalPages)}">
                        <a th:if="${currentPage != i}" th:href="@{'/manager/listaProizvoda/page/' + ${i} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">[[${i}]]</a>
                        <span th:unless="${currentPage != i}">[[${i}]]</span> &nbsp; &nbsp;
                    </th:block>
                </div>
                <div class="col-md-1">
                    <a th:if="${currentPage < totalPages}" th:href="@{'/manager/listaProizvoda/page/' + ${currentPage + 1} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Next</a>
                    <span th:unless="${currentPage < totalPages}">Next</span>
                </div>
                <div class="col-md-1">
                    <a th:if="${currentPage < totalPages}" th:href="@{'/manager/listaProizvoda/page/' + ${totalPages} + '?sortField=' + ${sortField} + '&sortDir=' + ${sortDir}}">Last</a>
                    <span th:unless="${currentPage < totalPages}">Last</span>
                </div>
            </div>
        </th:block>
        <!--/* KRAJ paginacija  */-->
    </th:block>


</div>

<!--/* Footer fragment */-->
<div class="container">
    <div th:replace="fragments/footer :: footer1"></div>
</div>
<!--/* Footer fragment END */-->



<!-- Script Source Files -->

<!-- jQuery -->
<script th:src="@{/js/jquery-3.5.1.min.js}"></script>
<!-- Popper JS -->
<script th:src="@{/js/popper.min.js}"></script>
<!-- Bootstrap 4.5 JS -->
<script th:src="@{/js/bootstrap.min.js}"></script>
<!-- Font Awesome -->
<script th:src="@{/js/all.js}"></script>
</body>
</html>