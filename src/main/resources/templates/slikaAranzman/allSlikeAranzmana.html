<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="sr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

    <title>Planinarski klub "Summit Explorers"</title>

    <!-- Bootstrap 4.5 CSS -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <!-- reference CSS file -->
    <link rel="stylesheet" th:href="@{/css/myStyle.css}">

    <!--Font Awesome ikonice!-->
    <link th:href="@{/fontAwesome/all.css}" rel="stylesheet">

    <!--LightBox efekat za Galeriju slika -->
    <link rel="stylesheet" th:href="@{/ekko-lightBoxGallery/ekko-lightbox.css}">
    <!--load all styles -->
</head>
<body>


<!-- Navigation bar fragment -->
<div th:replace="fragments/navBar :: navBar1"></div>
<!-- Navigation bar fragment END-->

<div class="container">
    <div class="col-md-8 ml-0 mt-2">
        <h1>Galerija Slika Aranžmana (ID: [[${aranzman.aranzmanId}]], Naziv: [[${aranzman.naziv}]])</h1>
    </div>

    <th:block th:if="${slikaAranzmanAlreadyExists}"> <!--/*Ukoliko naziv slike aranzmana vec postoji u okviru tog aranzmana*/-->
        <div class="col-md-8 pl-0">
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <span th:text="${slikaAranzmanAlreadyExists}"></span>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        </div>
    </th:block>

    <div class="row mb-4">
        <div class="col-md-3">
            <form action="#" th:action="@{/admin/aranzman/slikeAranzmana/new(aranzmanId=${aranzman.aranzmanId})}" enctype="multipart/form-data" method="POST">

                <div class="form-group">
                    <label>Dodaj sliku:</label>
                    <input type="file" name="slika" accept="image/png, image/jpeg" required>
                </div>

                <input type="submit" value="Sačuvaj" class="btn btn-outline-success">
            </form>
        </div>
    </div>

    <th:block th:if="${slikaAranzmanaObrisana}">
        <div class="col-md-7 pl-0">
            <div class="alert alert-primary alert-dismissible fade show" role="alert">
                <span><i class="fas fa-check-double"></i> Uspešno ste obrisali željenu sliku aranžmana!</span>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        </div>
    </th:block>





    <th:block th:if="${listaSlikaAranzmana == null or listaSlikaAranzmana.isEmpty()}">
        <h2>Trenutno ne postoji nijedna slika za aranzman.</h2>
    </th:block>

    <th:block th:if="${listaSlikaAranzmana != null and !listaSlikaAranzmana.isEmpty()}">

        <!--/*-->
        <div th:each="slika : ${listaSlikaAranzmana}">
            <img th:src="@{${slika.getImagePath()}}">
        </div>
        <!--*/-->



        <div class="row justify-content-center">
            <div class="col-md-12">
                <div class="row">
                    <th:block th:each="slika : ${listaSlikaAranzmana}">
                        <div class="col-sm-4 mb-4" style="text-align: center;">
                            <a th:href="@{${slika.getImagePath()}}" data-toggle="lightbox" data-gallery="example-gallery" class="mb-1">
                                <img th:src="@{${slika.getImagePath()}}" class="img-fluid mb-2" style="object-fit: cover; width: 100%; height: 300px;">
                            </a>
                            <a th:href="@{/admin/slikaAranzman/delete(aranzmanId=${aranzman.aranzmanId}, slikaId=${slika.slikaId})}"
                               onclick="return confirm('Da li ste sigurni da želite da obrišete sliku?');">
                                <span style="color: red;">
                                    <i class="deleteIconImg fas fa-trash-alt fa-lg"></i>
                                </span>
                            </a>
                        </div>
                    </th:block>
                </div>
            </div>
        </div>

    </th:block>



</div>




<!-- Script Source Files -->

<!-- jQuery -->
<script th:src="@{/js/jquery-3.5.1.min.js}"></script>
<!-- Popper JS -->
<script th:src="@{/js/popper.min.js}"></script>
<!-- Bootstrap 4.5 JS -->
<script th:src="@{/js/bootstrap.min.js}"></script>
<!-- Font Awesome -->
<script th:src="@{/js/all.js}"></script>
<!--LightBox efekat za Galeriju slika -->
<script th:src="@{/ekko-lightboxGallery/ekko-lightbox.js}"></script>

<script>
    $(document).on('click', '[data-toggle="lightbox"]', function(event) {
        event.preventDefault();
        $(this).ekkoLightbox();
    });
</script>
</body>
</html>