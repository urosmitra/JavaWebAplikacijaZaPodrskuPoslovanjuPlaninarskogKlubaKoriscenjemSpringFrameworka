<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="sr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

    <title>Planinarski klub "Summit Explorers"</title>

    <!-- Bootstrap 4.5 CSS -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <!-- reference CSS file -->
    <link rel="stylesheet" th:href="@{/css/myStyle.css}">

    <!--Font Awesome ikonice!-->
    <link th:href="@{/fontAwesome/all.css}" rel="stylesheet">

    <!--LightBox efekat za Galeriju slika -->
    <link rel="stylesheet" th:href="@{/ekko-lightBoxGallery/ekko-lightbox.css}">
    <!--load all styles -->
</head>
<body>

<!-- Navigation bar fragment -->
<div th:replace="fragments/navBar :: navBar1"></div>
<!-- Navigation bar fragment END-->

<div class="container">
    <div class="col-md-9 ml-0 mt-2 mb-3">
        <h2>Sve Slike Proizvoda (ID: <span style="color: #0c5460;">[[${proizvod.proizvodId}]]</span>, Naziv: <span style="color: #0c5460;">[[${proizvod.naziv}]]</span>)</h2>
    </div>

    <div>
        <a th:href="@{/admin/listaProizvoda}" class="btn btn-link">Nazad na Proizvode</a>
    </div>

    <div class="bottomLineWhite mb-4"></div>

    <th:block th:if="${nazivSlikeProizvodaAlreadyExists}"> <!--/*Ukoliko naziv slike proizvoda vec postoji u okviru tog proizvoda*/-->
        <div class="col-md-9 pl-0">
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <span>Izabrana slika <b>već postoji</b> u okviru slika ovog proizvoda <b>pod tim nazivom!</b> (Naziv fajla: <b>[[${nazivFajla}]]</b>)</span>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        </div>
    </th:block>

    <!--/* FORMA ZA DODAVANJE NOVE SLIKE PROIZVODA */-->
    <div class="row mb-4">
        <div class="col-md-8">
            <form action="#" th:action="@{/admin/slikaProizvod/addNew}" enctype="multipart/form-data" method="POST">

                <div class="form-group">
                    <label class="mr-3">Dodaj sliku:</label>
                    <input type="file" name="slika" accept="image/png, image/jpeg" required>
                </div>

                <input type="hidden" name="proizvodId" th:value="${proizvod.proizvodId}">

                <input type="submit" value="Sačuvaj" class="btn btn-outline-success" style="margin-left: 3.5rem;">

            </form>
        </div>
    </div>
    <!--/* KRAJ FORMA ZA DODAVANJE NOVE SLIKE PROIZVODA */-->

    <th:block th:if="${proizvodObrisan}">
        <div class="col-md-7 pl-0">
            <div class="alert alert-primary alert-dismissible fade show" role="alert">
                <span><i class="fas fa-check-double"></i> Uspešno ste obrisali željenu sliku proizvoda!</span>
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        </div>
    </th:block>


    <th:block th:if="${listaSlikaProizvoda == null or listaSlikaProizvoda.isEmpty()}">
        <div class="col-md-8 pl-0">
            <h3>Trenutno ne postoji nijedna slika za ovaj proizvod osim thumbnail slike.</h3>
        </div>
    </th:block>

    <th:block th:if="${listaSlikaProizvoda != null and !listaSlikaProizvoda.isEmpty()}">

        <div class="row">
            <th:block th:each="slika : ${listaSlikaProizvoda}">
                <div class="col-sm-4 mb-4" style="text-align: center;">
                    <a th:href="@{${slika.getImagePath()}}" data-toggle="lightbox" data-gallery="example-gallery" class="mb-1">
                        <img th:src="@{${slika.getImagePath()}}" class="img-fluid mb-2" style="object-fit: cover; width: 100%; height: 300px;">
                    </a>
                    <a th:href="@{/admin/slikaProizvod/delete(proizvodId=${proizvod.proizvodId}, slikaId=${slika.slikaProizvodId})}"
                       onclick="return confirm('Da li ste sigurni da želite da obrišete sliku?');">
                                <span style="color: red;">
                                    <i class="deleteIconImg fas fa-trash-alt fa-lg"></i>
                                </span>
                    </a>
                </div>
            </th:block>
        </div>

    </th:block>




</div>



<!-- Script Source Files -->

<!-- jQuery -->
<script th:src="@{/js/jquery-3.5.1.min.js}"></script>
<!-- Popper JS -->
<script th:src="@{/js/popper.min.js}"></script>
<!-- Bootstrap 4.5 JS -->
<script th:src="@{/js/bootstrap.min.js}"></script>
<!-- Font Awesome -->
<script th:src="@{/js/all.js}"></script>
<!--LightBox efekat za Galeriju slika -->
<script th:src="@{/ekko-lightboxGallery/ekko-lightbox.js}"></script>

<script>
    $(document).on('click', '[data-toggle="lightbox"]', function(event) {
        event.preventDefault();
        $(this).ekkoLightbox();
    });
</script>
</body>
</html>