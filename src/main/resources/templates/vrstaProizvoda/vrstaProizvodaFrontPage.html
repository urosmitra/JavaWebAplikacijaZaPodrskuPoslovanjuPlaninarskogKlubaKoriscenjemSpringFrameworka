<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="sr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">

    <title>Planinarski klub "Summit Explorers"</title>

    <!-- Bootstrap 4.5 CSS -->
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <!-- reference CSS file -->
    <link rel="stylesheet" th:href="@{/css/myStyle.css}">


    <!--Font Awesome ikonice!-->
    <link th:href="@{/fontAwesome/all.css}" rel="stylesheet"> <!--load all styles -->

</head>
<body class="bodyKorisnikBackground">

<!-- Top Bar -->
<div th:replace="fragments/topBar :: topBar1(brojTelefonaKluba=${klub.brojTelefona}, emailKluba=${klub.email})"></div>
<!-- kraj Top Bara -->

<!-- Navigation bar fragment -->
<div th:replace="fragments/navBar :: navBar1"></div>
<!-- Navigation bar fragment END-->

<div class="container" style="background-color: #fff;">

    <div class="col-md-12" style="height: 2rem;">
    </div>

    <div class="col-md-12 text-center mb-4" style="margin-bottom: 1.8rem;">
        <h2>[[${vrstaProizvoda.naziv}]]</h2>
    </div>

    <div class="bottomLineWhite"></div>


    <section id="proizvodiVrsteProizvodaSection">
        <th:block th:if="${listaProizvodaVrste != null and !listaProizvodaVrste.isEmpty()}">
            <div class="d-flex justify-content-center">
                <div th:each="proizvod : ${listaProizvodaVrste}" class="card mr-2 mb-3" style="width: 16rem;"> <!-- PROIZVOD Card -->
                    <a th:href="@{/prodavnica/proizvod(proizvodId=${proizvod.proizvodId})}">
                        <img class="lazy card-img-top" style="height: 250px;" th:src="@{${proizvod.getThumbnailPhotoPath()}}" th:alt="${'Slika proizvoda: ' + proizvod.naziv}">
                    </a>
                    <div class="card-body text-center">
                        <div class="row">

                            <!-- Cena Proizvoda i popust ako ima -->
                            <div class="d-flex justify-content-center col-md-12 mb-3 mt-3">
                                <th:block th:if="${proizvod.popust != 0}">
                                    <div style="position: relative; margin-right: 0.8rem;">
                                        <span class="font-weight-bolder d-block pl-2 pr-2" style="background-color: #e4ce21;">[[${proizvod.cena}]]&#8364;</span>
                                        <i class="fa fa-slash redSlash3"></i>
                                    </div>
                                </th:block>
                                <th:block th:if="${proizvod.popust == 0}">
                                    <span class="font-weight-bolder d-block pl-2 pr-2" style="background-color: #e4ce21;">[[${proizvod.cena}]]&#8364;</span>
                                </th:block>
                                <th:block th:if="${proizvod.popust != 0}">
                                    <div th:with="cenaSaPopustom = ${@proizvodServiceImpl.getCenaProizvodaSaPopustom(proizvod)}">
                                        <span class="font-weight-bolder d-block pl-2 pr-2" style="background-color: #1fcb36;">[[${cenaSaPopustom}]] &#8364;</span>
                                    </div>
                                </th:block>
                            </div>
                            <!-- KRAJ Cena Proizvoda i popust ako ima -->

                            <div class="d-flex justify-content-center col-md-12">
                                <a th:href="@{/prodavnica/proizvod(proizvodId=${proizvod.proizvodId})}" class="text-decoration-none linkTextProdavnicaProizvod">
                                    <div class="card-title nazivProizvodaFrontPage">[[${proizvod.naziv}]]</div>
                                </a>
                            </div>

                            <!-- Ima na Stanju ili Nema na Stanju -->
                            <div class="d-flex justify-content-center col-md-12" th:with="naStanju = ${@proizvodServiceImpl.daLiImaNaStanju(proizvod)}">
                                <th:block th:if="${naStanju}">
                                    <span class="font-weight-bolder" style="color: #1e7e34;"><i class="fas fa-check"></i> Na Stanju</span>
                                </th:block>
                                <th:block th:if="${!naStanju}">
                                    <span class="font-weight-bolder" style="color: red;"><i class="fas fa-times"></i> Trenutno Nema na Stanju</span>
                                </th:block>
                            </div>
                            <!--KRAJ Ima na Stanju ili Nema na Stanju -->

                        </div>
                    </div><!--KRAJ card-body div-a -->
                </div><!-- KRAJ PROIZVOD CARD-A -->
            </div>

        </th:block>

        <div class="col-md-12 text-center">
            <div class="button">
                <button id="showMoreBtn">Prikaži više</button>
            </div>
        </div>

    </section>

    <th:block th:if="${listaProizvodaVrste == null or listaProizvodaVrste.isEmpty()}">
        <h4>Trenutno nema nijednog proizvoda ove vrste.</h4>
    </th:block>


</div>

<div class="container px-0">
    <!--/* Footer fragment */-->
    <div th:replace="fragments/footer :: footer2(brojTelefonaKluba=${klub.brojTelefona}, emailKluba=${klub.email})"></div>
    <!--/* Footer fragment END */-->
</div>


<!-- Script Source Files -->

<!-- jQuery -->
<script th:src="@{/js/jquery-3.5.1.min.js}"></script>
<!-- Popper JS -->
<script th:src="@{/js/popper.min.js}"></script>
<!-- Bootstrap 4.5 JS -->
<script th:src="@{/js/bootstrap.min.js}"></script>
<!-- Font Awesome -->
<script th:src="@{/js/all.js}"></script>
<!-- jQuery lazyload za "load more" button -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.lazyload/1.9.1/jquery.lazyload.min.js" integrity="sha512-jNDtFf7qgU0eH/+Z42FG4fw3w7DM/9zbgNPe3wfJlCylVDTT3IgKW5r92Vy9IHa6U50vyMz5gRByIu4YIXFtaQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script type="text/javascript" th:inline="javascript">


    $(document).ready(function (){
        if($("#proizvodiVrsteProizvodaSection .d-flex .card:hidden").length == 0){
            document.getElementById('showMoreBtn').style.display = 'none';
        }
    });

    $("#showMoreBtn").click(function(){
        $("#proizvodiVrsteProizvodaSection .d-flex .card:hidden").slice(0,4).slideDown();
        if($("#proizvodiVrsteProizvodaSection .d-flex .card:hidden").length == 0) {
            $("#showMoreBtn").fadeOut("slow");
        }
    });

</script>

<script>
    $(function(){
        $("img.lazy").lazyload();
    });
</script>

</body>
</html>